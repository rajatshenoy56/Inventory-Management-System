<!DOCTYPE html>
<html style ="height: 100%; width: 100%; padding: 0ch; margin: 0ch; overflow-x: hidden;">
<head>
	<title>Home Page</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script>
        fetch("https://inventoms.herokuapp.com/get_godown").then(
            res=>{
                res.json().then(
                    data=>{
                        console.log(data);
                        if(data.length >0){
                            var temp = "";
                            var temp1 = "";
                            var temp2 = "";

                            data.forEach(element => {
                                temp += element.id
                                temp1 += element.address
                                temp2 += element.inid
                            });

                            document.getElementById("godownid").innerHTML = temp;
                            document.getElementById("address").innerHTML = temp1;
                            document.getElementById("userid").innerHTML = temp2;
                        }
                    }
                )
            }
        )

        fetch("https://inventoms.herokuapp.com/get_users").then(
            res=>{
                res.json().then(
                    data=>{
                        console.log(data);
                        if(data.length >0){
                            var temp = "";
                            var temp1 = "";

                            data.forEach(element => {
                                temp += element.name
                                temp1 += element.email
                            });

                            document.getElementById("name").innerHTML = temp;
                            document.getElementById("email").innerHTML = temp1;
                        }
                    }
                )
            }
        )
    
        fetch("https://inventoms.herokuapp.com/get_equip").then(
            res=>{
                res.json().then(
                    data=>{
                        console.log(data);
                        if(data.length >0){
                            var temp = "";

                            data.forEach(element => {
                                temp += "<tr>";
                                temp += "<td>"+element.id+"</td>";
                                temp += "<td>"+element.name+"</td>";
                                temp += "<td>"+element.cost+"</td>";
                                temp += "<td>"+element.quantity+"</td></tr>";
                            });

                            h = document.getElementById("tr1");
                            h.insertAdjacentHTML("afterend", temp);
                        }
                    }
                )
            }
        )

        fetch("https://inventoms.herokuapp.com/sum").then(
            res=>{
                res.json().then(
                    data=>{
                        console.log(data);
                        if(data.length >0){
                            var temp = "";

                            data.forEach(element => {
                                temp += element.sum
                            });

                            document.getElementById("cost").innerHTML = temp;
                        }
                    }
                )
            }
        )
        
        fetch(`https://inventoms.herokuapp.com/equipment/img_url`).then(
            res=>{
                res.json().then(
                    data=>{
                        console.log(data);
                        var img = document.createElement("img");
                        img.src = data.url;
                        var src = document.getElementById("x");
                        src.appendChild(img);
                        var a = document.createElement("a");
                        a.href = data.url;
                        a.id = "download";
                        a.download= "image.jpg"
                        var srcc = document.getElementById("x");
                        srcc.appendChild(a)
                        var srccc = document.getElementById("download");
                        srccc.innerHTML = "download"
                    }
                )
            }
        )
    </script>
</head>
<body style= "height: 100%; width: 100%; padding: 0ch; margin: 0ch; overflow-x: hidden;">
    <div class='container-fluid p-0'>
        <nav class="navbar navbar-default bg-primary">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a href="#" class="navbar-brand text-light"><h2>MyInventory</h2></a>
                </div>
                 <ul class="nav navbar-nav">
                        <div class="row">
                            <div class="col">
                                <li><a class="text-light" href="https://inventoms.herokuapp.com/buyer"><h5>Buyers</h5></a></li>
                            </div>
                            <div class="col">
                                <li><a class="text-light" href="https://inventoms.herokuapp.com/technician"><h5>Technician</h5></a></li>
                            </div>
                            <div class="col">
                                <li><a class="text-light" href="https://inventoms.herokuapp.com/company/details"><h5>Company Details</h5></a></li>
                            </div>
                            <div class="col">
                                <li><a class="text-light" href="https://inventoms.herokuapp.com/other_godowns"><h5>Other gowdowns</h5></a></li>
                            </div>
                            <div class="col">
                                <li><a class="text-light" href="https://inventoms.herokuapp.com/logout"><h5>Logout</h5></a></li>
                            </div>
                        </div>
                    </ul>
            </div>
        </nav>
        <div class="row">
            <div class="col-sm-3">
                <ul class="list-group p-0">
                    <li class="list-group-item"><a href="https://inventoms.herokuapp.com/equipment/form" class="text-dark"><h5>Add Equipment</h5></a></li>
                        <li class="list-group-item"><a href="https://inventoms.herokuapp.com/edit_equip/rform" class="text-dark"><h5>Remove Equipment</h5></a></li>
                        <li class="list-group-item"><a href="https://inventoms.herokuapp.com/edit_equip/change_quantity_form" class="text-dark"><h5>Change equipment quantity</h5></a></li>
                        <li class="list-group-item"><a href="https://inventoms.herokuapp.com/edit_equip/change_price_form" class="text-dark"><h5>Change equipment price</h5></a></li>
                        <li class="list-group-item"><a href="https://inventoms.herokuapp.com/buyer/aform" class="text-dark"><h5>Add a new buyer</h5></a></li>
                        <li class="list-group-item"><a href="https://inventoms.herokuapp.com/technician/aform" class="text-dark"><h5>Add a new technician</h5></a></li>
                        <li class="list-group-item"><a href="https://inventoms.herokuapp.com/buyer/rform" class="text-dark"><h5>Remove a buyer</h5></a></li>
                        <li class="list-group-item"><a href="https://inventoms.herokuapp.com/technician/rform" class="text-dark"><h5>Remove a technician</h5></a></li>
                        <li class="list-group-item"><a href="https://inventoms.herokuapp.com/sell_equip/form" class="text-dark"><h5>Sell an equipment</h5></a></li>
                        <li class="list-group-item"><a href="https://inventoms.herokuapp.com/maintenance/aform" class="text-dark"><h5>Add Maintenance</h5></a></li><li class="list-group-item"><a href="https://inventoms.herokuapp.com/sell_equip/transactions" class="text-dark"><h5>Sale history</h5></a></li>
                </ul>
            </div>
            <div class="col-sm-9 p-4">
                <div class="row">
                    <div class="col">
                        <div class="card bg-primary p-3 mb-3">
                            <h4 class="card-title text-light">Godown overview</h4>
                            <hr class="bg-light">
                            <div class="row">
                                <div class="col card-text p-2 text-light">Name:<h3 id = name></h3></div>
                                <div class="col card-text p-2 text-light">UserID:<h3 id = userid></h3></div>
                                <div class="col card-text p-2 text-light">Email ID:<h3 id = email></h3></div>
                            </div>
                            <div class="row">
                                <div class="col card-text p-2 text-light">Address: <h3 id = address></h3></div>
                                <div class="col card-text p-2 text-light">Godown ID: <h3 id = godownid></h3></div>
                                <div class="col card-text p-2 text-light">Total cost. of equipments sold:<h3 id = cost></h3></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="card bg-primary p-3">
                            <h4 class="card-title text-light">Equipment details</h4>
                            <hr class="bg-light">
                            <!-- <table border=2 cellpadding=5 class="text-light" bordercolor="white">
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Cost</th>
                                    <th>Quantity</th>
                                </tr>
                            </table> -->
                            <table border=2 cellpadding=5 class="text-light" bordercolor="white" id="data">
                                <tr id = "tr1">
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Cost</th>
                                    <th>Quantity</th>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div id="x"></div>
            </div>
        </div>
    </div>
    <script>
        $("#data").on("click", "tr", function(e) {
            console.log($(e.currentTarget).index() + 1);
            var row = $(this).find('td:first').text();
            console.log(row);
            document.cookie = row;
            window.location = "https://inventoms.herokuapp.com/get_equip/details";

            // Sets the new href (URL) for the current window.
            window.location.href = "https://inventoms.herokuapp.com/get_equip/details";

            // Assigns a new URL to the current window.
            window.location.assign("https://inventoms.herokuapp.com/get_equip/details");

            // Replaces the location of the current window with the new one.
            window.location.replace("https://inventoms.herokuapp.com/get_equip/details");

            // Sets the location of the current window itself.
            self.location = "https://inventoms.herokuapp.com/get_equip/details";

            // Sets the location of the topmost window of the current window.
            top.location = "https://inventoms.herokuapp.com/get_equip/details";

        });
    </script>
</body>
